# Starship configuration - デフォルト + Git背景色カスタム

# Git セグメント（状態に応じて背景色が変わる）
# 1. Staged（黄色背景）
[custom.git_staged]
command = '''
branch=$(git symbolic-ref --short HEAD 2>/dev/null || git rev-parse --short HEAD 2>/dev/null)
ahead=$(git rev-list --count @{upstream}..HEAD 2>/dev/null || echo 0)
behind=$(git rev-list --count HEAD..@{upstream} 2>/dev/null || echo 0)
ab=""
[ "$ahead" != "0" ] && ab=" ⇡$ahead"
[ "$behind" != "0" ] && ab="$ab⇣$behind"
echo " $branch$ab "
'''
style = "bold fg:#282a36 bg:#f1fa8c"
format = "[$output]($style)"
shell = ["bash", "--noprofile", "--norc"]
when = "git diff --cached --quiet 2>/dev/null; [ $? -eq 1 ]"

# 2. Modified（赤背景）
[custom.git_modified]
command = '''
branch=$(git symbolic-ref --short HEAD 2>/dev/null || git rev-parse --short HEAD 2>/dev/null)
ahead=$(git rev-list --count @{upstream}..HEAD 2>/dev/null || echo 0)
behind=$(git rev-list --count HEAD..@{upstream} 2>/dev/null || echo 0)
ab=""
[ "$ahead" != "0" ] && ab=" ⇡$ahead"
[ "$behind" != "0" ] && ab="$ab⇣$behind"
echo " $branch$ab "
'''
style = "bold fg:#f8f8f2 bg:#ff5555"
format = "[$output]($style)"
shell = ["bash", "--noprofile", "--norc"]
when = "git diff --cached --quiet 2>/dev/null && ! git diff --quiet 2>/dev/null"

# 3. Untracked（緑背景 + ...表示）
[custom.git_untracked]
command = '''
branch=$(git symbolic-ref --short HEAD 2>/dev/null || git rev-parse --short HEAD 2>/dev/null)
ahead=$(git rev-list --count @{upstream}..HEAD 2>/dev/null || echo 0)
behind=$(git rev-list --count HEAD..@{upstream} 2>/dev/null || echo 0)
ab=""
[ "$ahead" != "0" ] && ab=" ⇡$ahead"
[ "$behind" != "0" ] && ab="$ab⇣$behind"
echo " $branch...$ab "
'''
style = "bold fg:#282a36 bg:#50fa7b"
format = "[$output]($style)"
shell = ["bash", "--noprofile", "--norc"]
when = "git diff --cached --quiet 2>/dev/null && git diff --quiet 2>/dev/null && [ -n \"$(git ls-files --others --exclude-standard 2>/dev/null | head -1)\" ]"

# 4. Clean（緑背景）
[custom.git_clean]
command = '''
branch=$(git symbolic-ref --short HEAD 2>/dev/null || git rev-parse --short HEAD 2>/dev/null)
ahead=$(git rev-list --count @{upstream}..HEAD 2>/dev/null || echo 0)
behind=$(git rev-list --count HEAD..@{upstream} 2>/dev/null || echo 0)
ab=""
[ "$ahead" != "0" ] && ab=" ⇡$ahead"
[ "$behind" != "0" ] && ab="$ab⇣$behind"
echo " $branch$ab "
'''
style = "bold fg:#282a36 bg:#50fa7b"
format = "[$output]($style)"
shell = ["bash", "--noprofile", "--norc"]
when = "git diff --cached --quiet 2>/dev/null && git diff --quiet 2>/dev/null && [ -z \"$(git ls-files --others --exclude-standard 2>/dev/null | head -1)\" ]"

# 標準Gitを無効化（カスタムを使うため）
[git_branch]
disabled = true

[git_status]
disabled = true

# 時刻表示（プロンプト右側）
[time]
disabled = false
format = "[$time]($style) "
time_format = "%H:%M:%S"
style = "dimmed white"
